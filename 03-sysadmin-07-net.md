## Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

### 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
В Linux это команда `ip` с различными опциями. Например `ip -c -br link`. В Windows используется `ipconfig` с различными флагами и доп параметрами.
```
evgeniy@evgeniy-ms7788:~$ ip -c -br link
lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> 
enp2s0           DOWN           d4:3d:7e:4d:26:b8 <NO-CARRIER,BROADCAST,MULTICAST,UP> 
wlx1cbfce45d042  UP             1c:bf:ce:45:d0:42 <BROADCAST,MULTICAST,UP,LOWER_UP> 
```
### 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

Проприетарный  `cdp`, созданный CISCO, а также  `LLDP`, который используется повсеместно. Для работы в Linux нужно установить пакет lldpd  `sudo apt install lldpd`. После установки команда  `sudo lldpctl`  выдаст список устройств.
### 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Для этого используется VLAN. В Linux есть специальная утилита `vconfig` которая содержится в пакете `vlan`. Для его установки воспользуемся командой  `sudo apt install vlan`. Настройку VLANов необходимо добавить в файл /etc/network/interfaces.
Пример конфига:  
```
auto vlan1400
iface vlan1400 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
```
или же 
```
auto eth0.1400
iface eth0.1400 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
```
если хочется использовать названия интерфейсов вида eth0.1400, а не vlan1400. 

### 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
Типы агрегации в Linux - статическая и динамическая. Типы агрегации интерфейсов в Linux: `mode=0 - balance-rr - (round-robin)`, `mode=1 - active-backup`, `mode=2 - balance-xor`, `mode=3 - broadcast`, `mode=4 - 802.3ad`, `mode=5 - balance-tlb` и `mode=6 - balance-alb`.
Привет файла конфигурации:
```
$ sudo nano /etc/network/interfaces
# The primary network interface
auto bond0
iface bond0 inet static
  address 192.168.1.150
  netmask 255.255.255.0  
  gateway 192.168.1.1
  dns-nameservers 192.168.1.1 8.8.8.8
  dns-search domain.local
  slaves eth0 eth1
  bond_mode 0
  bond-miimon 100
  bond_downdelay 200
  bound_updelay 200
```
В директории `/etc/modprobe.d/` создадим файл допустим `bonding.conf` и в нем создадим запись `alias bond0 bonding`. Такая строка в файле `/etc/modprobe.d/bonding.conf` требуется для каждого bond интерфейса. Для агрегации интерфейсов создаём в директории `/etc/sysconfig/network-scripts/` файл конфигурации с именем _ifcfg-bond0_.
```
DEVICE=bond0
IPADDR=192.168.1.8
NETMASK=255.255.255.0
ONBOOT=yes
BOOTPROTO=none
USERCTL=no
```
После создания объединённого интерфейса нужно настроить его и связанные с ним сетевые карты, добавив в файлы конфигурации директивы _MASTER_ и _SLAVE_. Например, у двух интерфейсов eth0 и eth1, связанных в один, они могут иметь следующий вид.
```
Для eth0

DEVICE=eth0
USERCTL=no
ONBOOT=yes
MASTER=bond0
SLAVE=yes
BOOTPROTO=none
```
```
Для eth1

DEVICE=eth1
USERCTL=no
ONBOOT=yes
MASTER=bond0
SLAVE=yes
BOOTPROTO=none
```
### 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

С помощью команды `calc` получим:
С маской /29 мы получим 6 хостов, 8 адресов. Итого 256/8 = 32 сети.
```
evgeniy@evgeniy-ms7788:~$ ipcalc 10.10.10.0/24 /29
Address:   10.10.10.0           00001010.00001010.00001010. 00000000
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
=>
Network:   10.10.10.0/24        00001010.00001010.00001010. 00000000
HostMin:   10.10.10.1           00001010.00001010.00001010. 00000001
HostMax:   10.10.10.254         00001010.00001010.00001010. 11111110
Broadcast: 10.10.10.255         00001010.00001010.00001010. 11111111
Hosts/Net: 254                   Class A, Private Internet

Subnets after transition from /24 to /29

Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111

 1.
Network:   10.10.10.0/29        00001010.00001010.00001010.00000 000
HostMin:   10.10.10.1           00001010.00001010.00001010.00000 001
HostMax:   10.10.10.6           00001010.00001010.00001010.00000 110
Broadcast: 10.10.10.7           00001010.00001010.00001010.00000 111
Hosts/Net: 6                     Class A, Private Internet

 2.
Network:   10.10.10.8/29        00001010.00001010.00001010.00001 000
HostMin:   10.10.10.9           00001010.00001010.00001010.00001 001
HostMax:   10.10.10.14          00001010.00001010.00001010.00001 110
Broadcast: 10.10.10.15          00001010.00001010.00001010.00001 111
Hosts/Net: 6                     Class A, Private Internet

 3.
Network:   10.10.10.16/29       00001010.00001010.00001010.00010 000
HostMin:   10.10.10.17          00001010.00001010.00001010.00010 001
HostMax:   10.10.10.22          00001010.00001010.00001010.00010 110
Broadcast: 10.10.10.23          00001010.00001010.00001010.00010 111
Hosts/Net: 6                     Class A, Private Internet

 4.
Network:   10.10.10.24/29       00001010.00001010.00001010.00011 000
HostMin:   10.10.10.25          00001010.00001010.00001010.00011 001
HostMax:   10.10.10.30          00001010.00001010.00001010.00011 110
Broadcast: 10.10.10.31          00001010.00001010.00001010.00011 111
Hosts/Net: 6                     Class A, Private Internet

 5.
Network:   10.10.10.32/29       00001010.00001010.00001010.00100 000
HostMin:   10.10.10.33          00001010.00001010.00001010.00100 001
HostMax:   10.10.10.38          00001010.00001010.00001010.00100 110
Broadcast: 10.10.10.39          00001010.00001010.00001010.00100 111
Hosts/Net: 6                     Class A, Private Internet
```
### 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

Из подсети 100.64.0.0/26

### 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кэш полностью? Как из ARP таблицы удалить только один нужный IP?

Посмотреть ARP таблицу можно при помощи `arp`, c различными флагами. Удалить кэш полностью можно при помощи `ip -s -s neigh flush all`, удалить только один нужный IP - при помощи флага -d `arp -d IP_address`.
